### 安全相关记录

> https://mp.weixin.qq.com/s?__biz=MzAxMTI4MTkwNQ==&mid=2650823729&idx=1&sn=623b1602594d36f9f341d569640499bf&chksm=80b788afb7c001b9fde08409399527fc8c3fb5b4867e5c70661393a251354a751d3c47d9d0a3&scene=21#wechat_redirect

-----------------------------

##### 客户端安全

1. 应用核心代码混淆
2. 应用加固                                

##### 敏感信息安全

1. 对重要数据进行加密存储
2. log日志不打印敏感信息

##### 密码软键盘

1. 自定义的键盘
2. 防止屏幕截屏 `getWindow().addFlags(WindowManager.LayoutParams.FLAG_SECURE`

##### 安全策略

1. 密码复杂度(后台配合)
2. 账号密码登录锁定,限定次数(后台配合)
3. 会话安全(设置会话超时时间)
4. 界面切换保护,应用切换到后台但程序没有结束运行，再返回应用的时候是否有身份验证 ，手势密码或者登陆密码
5. 界面劫持保护,**在登录界面重写onPause方法。这个界面劫持只需要在登录界面做防护。needAlarm是定义的变量，初始化为true，然后监听home键和返回键以及你自身登录界面的其他activity的跳转。如果用户执行了监听的操作needAlarm赋值为false，说明是用户自身的操作，不是界面劫持 **

##### UI信息泄露

1. 检查客户端的各种功能，看是否存在敏感信息泄露问题(用户名或密码错误)
2. 账号登录限制,两个设备上同时登录同一个帐号
3. 安全退出 ,保证客户端和服务器同步退出，APP退出时服务器端的清除会话
4. 密码修改验证 ,建议在修改密码时，客户端及服务器系统增添原密码输入验证身份的逻辑
5. 私密问题验证 ,验证客户端是否存在忘记密码时的私密问题验证 

##### 手势密码

##### 通信安全

1. 通信加密 ,https或者http+403
2. 关键数据加密和校验,建议账号，密码，卡号，金额等进行加密处理，同时整个数据包进行二次加密，返回的敏感信息进行加密，同时返回数据包进行二次加密，并且使用增加随机因子的校验字段，并且确定服务器逻辑标志位正确，在删除校验字段时服务器不响应提交的数据包
3. 证书有效性验证 ,客户端和服务器进行双向认证，并且服务器通过白名单的方式验证客户端证书以保证证书的有效性
4. 访问控制,测试客户端访问的URL是否仅能由手机客户端访问
5. 短信重放攻击 ,检测应用中是否存在数据包重放攻击的安全问题。是否会对客户端用户造成短信轰炸的困扰( 建议：token和手机号一起，重放无法造成短信轰炸)

##### 业务安全

   根据实际业务操作

##### 模拟器检测

1. 大多数免费的模拟器，都没有蓝牙的功能![img](http://mmbiz.qpic.cn/mmbiz_png/MOu2ZNAwZwNm8To09ZC8RZSIlhiafDmaW8HjK8M7ocbicekcjDIch6MKH1Uz48TQb1n0RdWWOhePAZ3yZFgVhdDQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1)

##### 短信验证,60s验证

